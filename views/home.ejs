<!DOCTYPE html>
<html lang="en">
<head>
  <title>Home | FuadXyro CDN</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description"
    content="CDN kami dapat menyimpan file dalam format MP3, MP4, Image, File.">
  <meta name="author" content="FuadXyro">
  <meta name="theme-color" content="#9D00EC">
  <link rel="icon" href="../assets/img/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="../assets/css/style2.css">
</head>
<body>
  <div class="upload-area" id="drop-area">
    <h1>FuadXyro CDN | Hosting Media</h1>
    <h3>Drag & Drop files here</h3><br>
    <div class="upload-box">
      <div id="upload" class="upload-btn">üìÇ Choose File</div>
      <input type="file" id="input" style="display: none;">
      <div id="uploading" class="uploading" style="display:none;">Uploading...</div>
      <div id="result" class="result"></div>
    </div>
  </div>

  <footer>
    &copy; 2024 FuadXyro CDN. All rights reserved. | API <a href="/docs"><b>Docs</b></a>
  </footer>

  <script>
    const fileInput = document.getElementById("input");
    const uploadBtn = document.getElementById("upload");
    const uploading = document.getElementById("uploading");
    const result = document.getElementById("result");

    uploadBtn.addEventListener("click", () => fileInput.click());

    fileInput.addEventListener("change", async () => {
      const file = fileInput.files[0];
      if (!file) return;

      const formData = new FormData();
      formData.append("file", file);

      uploading.style.display = "block";
      result.innerHTML = "";

      try {
        const res = await fetch("/api/upload", {
          method: "POST",
          body: formData
        });

        const data = await res.json();
        uploading.style.display = "none";

        if (data.status) {
          result.innerHTML = `
            ‚úÖ File uploaded! <br>
            <a href="${data.data.url}" target="_blank">${data.data.url}</a>
          `;
        } else {
          result.innerHTML = "‚ùå Upload failed: " + (data.message || "Unknown error");
        }
      } catch (err) {
        uploading.style.display = "none";
        result.innerHTML = "‚ùå Upload error: " + err.message;
      }
    });
  </script>
</body>
</html>
